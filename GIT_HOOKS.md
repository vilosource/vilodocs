# Git Hooks

This project uses Git hooks to maintain code quality and prevent common issues.

## Setup

Git hooks are stored in `.githooks/` directory (version controlled) instead of `.git/hooks/` (not version controlled).

To enable the hooks:
```bash
# Option 1: Run the setup script
./scripts/setup-hooks.sh

# Option 2: Configure manually
git config core.hooksPath .githooks
```

## Active Hooks

### pre-push
**Purpose**: Prevents pushing code that doesn't pass linting

The pre-push hook runs `npm run lint` before allowing any push to remote repositories. This ensures that:
- No code with linting errors reaches the repository
- Code style remains consistent across the codebase
- TypeScript errors are caught before CI/CD

**If the push is rejected:**
1. Fix the linting errors shown in the output
2. For auto-fixable issues, run: `npm run lint -- --fix`
3. Commit the fixes
4. Try pushing again

### commit-msg
**Purpose**: Prevents AI attributions in commit messages

This hook rejects commits that contain:
- References to Claude, GPT, or other AI tools
- "Generated with" or "Co-Authored-By" AI attributions
- Robot emojis (ü§ñ)
- AI service email addresses (e.g., noreply@anthropic.com)
- AI-related keywords in attribution context

**Example rejected patterns:**
- `ü§ñ Generated with Claude Code`
- `Co-Authored-By: Claude <noreply@anthropic.com>`
- `Created by ChatGPT`
- `Generated by AI`

**If your commit is rejected:**
1. Remove all AI attribution from your commit message
2. Write the commit message as a human developer would
3. Focus on what changed and why, not how it was created

## Testing Hooks

To test the commit-msg hook:
```bash
# This should fail
echo "feat: add feature ü§ñ Generated with Claude Code" | .githooks/commit-msg /dev/stdin

# This should pass
echo "feat: add feature" | .githooks/commit-msg /dev/stdin
```

## Bypassing Hooks (Emergency Only)

If you absolutely need to bypass the hooks in an emergency:
- For pre-push: `git push --no-verify`
- For commit-msg: `git commit --no-verify`

‚ö†Ô∏è **Use with caution** - bypassing hooks defeats their purpose and may introduce issues into the codebase.

## Adding New Hooks

To add a new Git hook:
1. Create the hook script in `.githooks/`
2. Make it executable: `chmod +x .githooks/hook-name`
3. Document it in this file
4. Test the hook thoroughly before committing

## Hook Implementation Details

All hooks are:
- Stored in `.githooks/` directory (version controlled)
- Written in bash for portability
- Executable with proper shebang (`#!/bin/bash`)
- Well-documented with clear error messages